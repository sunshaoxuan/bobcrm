# API服务器启动说明

## 问题诊断

当前问题：前端请求 `http://192.168.20.218:8080` 返回 404，因为：
1. API服务器没有运行，或者
2. API服务器运行在不同的地址/端口

## 解决方案

### 方式1：启动API服务器（推荐）

1. **启动API服务器**：
   ```bash
   cd src/BobCrm.Api
   dotnet run --urls "http://0.0.0.0:8080"
   ```
   或者使用配置文件中的端口：
   ```bash
   dotnet run --urls "http://0.0.0.0:5200"
   ```

2. **确认API服务器正在运行**：
   - 访问 `http://localhost:8080/swagger` 或 `http://localhost:5200/swagger`
   - 应该看到 Swagger API 文档页面

3. **验证API端点**：
   - 访问 `http://localhost:8080/api/i18n/ja`（或5200端口）
   - 应该返回JSON数据，而不是404

4. **在前端Setup页面**：
   - 如果API在本地运行，使用：`http://localhost:8080` 或 `http://localhost:5200`
   - 如果需要从其他机器访问，使用：`http://192.168.20.218:8080`（需要确保API绑定到0.0.0.0）

### 方式2：检查API服务器是否已在运行

如果API服务器已经在运行，但端口不对：
- 检查实际运行的端口（从日志或进程列表）
- 在Setup页面使用正确的地址和端口

### 调试步骤

1. **查看API服务器日志**：`logs/api.out.log`
2. **确认监听地址**：日志中应该显示 "Now listening on: http://..."
3. **测试API端点**：在浏览器中直接访问 `/api/i18n/ja` 端点

## 当前配置

- **API配置的端口**：5200（launchSettings.json）
- **前端请求的地址**：192.168.20.218:8080
- **实际需要**：API服务器运行在 8080 端口，绑定到 0.0.0.0 或 192.168.20.218

