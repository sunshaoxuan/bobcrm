# TC-CRM-001 客户管理

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-CRM-001 |
| **用例名称** | 客户管理 |
| **所属领域** | 客户关系管理 (CRM) |
| **测试类型** | 功能测试 |
| **优先级** | P1 - 重要功能 |
| **版本** | 1.0 |

---

## 1. 测试场景描述

### 1.1 业务背景
客户管理是 CRM 系统的核心功能，允许用户录入、查看和管理客户信息。

### 1.2 涉及页面
- `/customers` - 客户列表
- `/customers/new` - 新建客户
- `/customer/{Id}` - 客户详情（动态路由）

---

## 2. 前置条件

| 条件编号 | 条件描述 |
|----------|----------|
| PRE-001 | 用户已登录 |
| PRE-002 | 已发布 `customer` 实体定义（如系统未预置） |

---

## 3. 测试步骤

### 场景 A: 查看客户列表

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| A1 | 导航到 `/customers` | 显示客户列表页面 | ✓ |
| A2 | 确认显示"新建客户"和"导出"按钮 | 按钮可见 | - |

### 场景 B: 新建客户

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| B1 | 点击"新建客户"按钮 | 跳转到 `/customers/new` | ✓ |
| B2 | 填写客户名称 | 输入成功 | - |
| B3 | 填写联系方式等必填字段 | 输入成功 | - |
| B4 | 点击保存 | 显示保存成功，返回列表或详情 | ✓ |

### 场景 C: 客户数据交互

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| C1 | 点击列表中的客户记录 | 进入详情页 | ✓ |
| C2 | 验证详情页信息与录入一致 | 数据显示正确 | - |

---

## 4. 预期结果汇总

| 结果编号 | 场景 | 预期结果 |
|----------|------|----------|
| EXP-001 | 列表访问 | 页面正常加载，权限控制生效 |
| EXP-002 | 数据创建 | 客户记录创建成功 |

---

## 5. AI 自动化测试注释

```yaml
test_type: e2e
requires_auth: any_user

cleanup:
  strategy: database
  steps:
    - sql: DELETE FROM customer WHERE Name LIKE 'AutoTest%'
  on_error: ignore
  
cleanup_order: both

verify_cleanup:
  - sql: SELECT COUNT(*) FROM customer WHERE Name LIKE 'AutoTest%'
    expected: 0
```
