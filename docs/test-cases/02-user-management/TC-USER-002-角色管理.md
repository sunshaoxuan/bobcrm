# TC-USER-002 角色管理

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-USER-002 |
| **用例名称** | 角色管理 |
| **所属领域** | 用户与权限管理 |
| **测试类型** | 功能测试 |
| **优先级** | P1 - 重要功能 |
| **版本** | 1.0 |

---

## 1. 测试场景描述

### 1.1 业务背景
管理员可以创建、编辑、删除角色，并为角色分配权限。

### 1.2 测试目的
验证角色管理功能的 CRUD 操作和权限配置。

### 1.3 涉及页面
- `/roles` - 角色管理页面

---

## 2. 前置条件

| 条件编号 | 条件描述 |
|----------|----------|
| PRE-001 | 以管理员身份登录 |

---

## 3. 测试数据

### 3.1 新角色数据

```json
{
  "roleName": "TestRole",
  "description": "测试角色"
}
```

---

## 4. 测试步骤

### 场景 A: 查看角色列表

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| A1 | 导航到 `/roles` | 显示角色列表页面 | ✓ |
| A2 | 确认默认角色存在（如 admin） | 系统预设角色可见 | - |

### 场景 B: 创建新角色

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| B1 | 点击"新建角色"按钮 | 显示创建表单/对话框 | ✓ |
| B2 | 输入角色名 `TestRole` | 输入成功 | - |
| B3 | 点击保存 | 角色创建成功，列表更新 | ✓ |

### 场景 C: 编辑角色

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| C1 | 点击 `TestRole` 的编辑按钮 | 显示编辑表单 | - |
| C2 | 修改描述为"已编辑的测试角色" | 输入成功 | - |
| C3 | 点击保存 | 更新成功 | ✓ |

### 场景 D: 删除角色

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| D1 | 点击 `TestRole` 的删除按钮 | 显示确认对话框 | - |
| D2 | 确认删除 | 角色从列表中移除 | ✓ |

### 场景 E: 禁止删除系统角色

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| E1 | 尝试删除 admin 角色 | 操作被阻止或显示警告 | ✓ |

---

## 5. 预期结果汇总

| 结果编号 | 场景 | 预期结果 |
|----------|------|----------|
| EXP-001 | 查看列表 | 显示所有角色 |
| EXP-002 | 创建角色 | 新角色成功创建 |
| EXP-003 | 编辑角色 | 角色信息更新成功 |
| EXP-004 | 删除角色 | 角色成功删除 |
| EXP-005 | 系统角色保护 | 系统角色无法删除 |

---

## 6. AI 自动化测试注释

```yaml
test_type: e2e
requires_auth: admin
cleanup: delete_role("TestRole")
```
