# TC-ORG-001 组织结构管理

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-ORG-001 |
| **用例名称** | 组织结构管理 |
| **所属领域** | 组织管理 |
| **测试类型** | 功能测试 |
| **优先级** | P1 - 重要功能 |
| **版本** | 1.0 |

---

## 1. 测试场景描述

### 1.1 业务背景
管理员可以创建和管理组织层级结构，包括部门、团队等。

### 1.2 涉及页面
- `/organizations` - 组织管理页面

---

## 2. 前置条件

| 条件编号 | 条件描述 |
|----------|----------|
| PRE-001 | 以管理员身份登录 |

---

## 3. 测试数据

```json
{
  "parentOrg": { "name": "总公司", "code": "HQ" },
  "childOrg": { "name": "技术部", "code": "TECH", "parentCode": "HQ" }
}
```

---

## 4. 测试步骤

### 场景 A: 查看组织结构

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| A1 | 导航到 `/organizations` | 显示组织结构页面（树形或列表） | ✓ |

### 场景 B: 创建根组织

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| B1 | 点击"新建组织"按钮 | 显示创建表单 | - |
| B2 | 输入组织名称 `总公司`，代码 `HQ` | 输入成功 | - |
| B3 | 点击保存 | 组织创建成功，树形结构更新 | ✓ |

### 场景 C: 创建子组织

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| C1 | 在 `总公司` 下点击添加子节点 | 显示创建子组织表单 | - |
| C2 | 输入 `技术部`，代码 `TECH` | 输入成功 | - |
| C3 | 点击保存 | 子组织创建成功，层级正确显示 | ✓ |

### 场景 D: 编辑组织

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| D1 | 点击 `技术部` 的编辑按钮 | 显示编辑表单 | - |
| D2 | 修改名称为 `研发部` | 输入成功 | - |
| D3 | 保存 | 名称更新成功 | ✓ |

### 场景 E: 删除组织

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| E1 | 尝试删除有子节点的 `总公司` | 显示警告（需先删除子节点）或级联删除确认 | ✓ |
| E2 | 删除 `技术部`（无子节点） | 删除成功 | - |

---

## 5. 预期结果汇总

| 结果编号 | 场景 | 预期结果 |
|----------|------|----------|
| EXP-001 | 查看结构 | 正确显示组织树 |
| EXP-002 | 创建根组织 | 根节点创建成功 |
| EXP-003 | 创建子组织 | 子节点创建在正确父节点下 |
| EXP-004 | 编辑组织 | 信息更新成功 |
| EXP-005 | 删除组织 | 删除逻辑正确处理 |

---

## 6. AI 自动化测试注释

```yaml
test_type: e2e
requires_auth: admin
cleanup: delete_organization("HQ")
```
