# TC-AUTH-004 用户登出

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-AUTH-004 |
| **用例名称** | 用户登出 |
| **所属领域** | 认证与授权 |
| **测试类型** | 功能测试 |
| **优先级** | P1 - 重要功能 |
| **版本** | 1.0 |

---

## 1. 测试场景描述

### 1.1 业务背景
已登录用户通过登出功能退出系统，清除本地会话信息。

### 1.2 测试目的
验证登出功能正确清除会话并重定向到登录页。

### 1.3 涉及页面
- `/` - 仪表盘（含登出按钮）
- `/login` - 登录页面（登出后跳转）

---

## 2. 前置条件

| 条件编号 | 条件描述 |
|----------|----------|
| PRE-001 | 用户已成功登录 |
| PRE-002 | localStorage 中存在有效 token |

---

## 3. 测试步骤

### 场景 A: 正常登出

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| A1 | 在已登录状态下确认仪表盘显示 | 显示用户信息和登出入口 | ✓ |
| A2 | 点击用户头像/菜单打开下拉菜单 | 显示包含登出选项的菜单 | - |
| A3 | 点击登出按钮 | 触发登出流程 | - |
| A4 | 等待登出完成 | 页面跳转到 `/login` | ✓ |
| A5 | 验证 localStorage 已清除 token | `accessToken` 和 `user` 不存在 | - |
| A6 | 尝试访问 `/` (仪表盘) | 重定向到登录页 | ✓ |

---

## 4. 预期结果汇总

| 结果编号 | 场景 | 预期结果 |
|----------|------|----------|
| EXP-001 | 正常登出 | Token 清除，跳转到登录页 |
| EXP-002 | 登出后访问受保护页面 | 重定向到登录页 |

---

## 5. AI 自动化测试注释

```yaml
test_type: e2e
depends_on: TC-AUTH-002
storage_validation:
  after_logout:
    - localStorage.accessToken: not_exists
    - localStorage.refreshToken: not_exists
    - localStorage.user: not_exists
```
