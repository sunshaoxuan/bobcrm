# TC-AUTH-003 用户注册与激活

| 项目 | 内容 |
|------|------|
| **用例编号** | TC-AUTH-003 |
| **用例名称** | 用户注册与激活 |
| **所属领域** | 认证与授权 |
| **测试类型** | 功能测试 |
| **优先级** | P1 - 重要功能 |
| **版本** | 1.0 |

---

## 1. 测试场景描述

### 1.1 业务背景
新用户通过注册页面创建账户，注册后需要通过激活链接激活账户才能登录。

### 1.2 测试目的
验证用户注册流程和账户激活功能的完整性。

### 1.3 涉及页面
- `/register` - 注册页面
- `/activate` - 账户激活页面

---

## 2. 前置条件

| 条件编号 | 条件描述 |
|----------|----------|
| PRE-001 | 系统已完成初始化 |
| PRE-002 | 测试用户名 `newuser` 尚未注册 |

---

## 3. 测试数据

### 3.1 新用户数据

```json
{
  "username": "newuser",
  "email": "newuser@example.com",
  "password": "NewUser@123",
  "confirmPassword": "NewUser@123"
}
```

### 3.2 重复用户数据

```json
{
  "duplicateUsername": "admin",
  "duplicateEmail": "admin@example.com"
}
```

---

## 4. 测试步骤

### 场景 A: 正常注册流程

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| A1 | 访问 `/register` | 显示注册表单 | ✓ |
| A2 | 填写用户名 `newuser` | 输入成功 | - |
| A3 | 填写邮箱 `newuser@example.com` | 输入成功 | - |
| A4 | 填写密码和确认密码 | 输入成功 | - |
| A5 | 点击注册按钮 | 显示注册成功提示，提示需要激活 | ✓ |
| A6 | 尝试使用新账户登录（未激活） | 显示账户未激活错误 | ✓ |

### 场景 B: 账户激活

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| B1 | 获取激活链接（通过数据库或日志） | 获得激活 token | - |
| B2 | 访问 `/activate?token=xxx` | 显示激活成功 | ✓ |
| B3 | 使用激活后的账户登录 | 登录成功 | ✓ |

### 场景 C: 用户名重复

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| C1 | 使用已存在用户名 `admin` 注册 | 显示用户名已存在错误 | ✓ |

### 场景 D: 邮箱重复

| 步骤 | 操作描述 | 预期结果 | 截图 |
|------|----------|----------|------|
| D1 | 使用已存在邮箱注册 | 显示邮箱已被使用错误 | ✓ |

---

## 5. 预期结果汇总

| 结果编号 | 场景 | 预期结果 |
|----------|------|----------|
| EXP-001 | 正常注册 | 账户创建成功，待激活 |
| EXP-002 | 账户激活 | 激活成功后可登录 |
| EXP-003 | 用户名重复 | 显示重复错误，阻止注册 |
| EXP-004 | 邮箱重复 | 显示重复错误，阻止注册 |

---

## 6. AI 自动化测试注释

```yaml
test_type: e2e
requires_email_access: false  # 通过数据库获取激活 token
cleanup: delete_user("newuser")
```
