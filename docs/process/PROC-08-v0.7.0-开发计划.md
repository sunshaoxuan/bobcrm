# v0.7.0 开发计划

## 概述
本文档规划了 BobCRM v0.7.0 的开发任务，重点关注数据可视化（仪表盘）和安全性增强。

## 任务优先级

| 编号 | 任务名称 | 优先级 | 估算时间 | 依赖 |
|------|----------|--------|----------|------|
| T1 | 仪表盘引擎 MVP | 高 | 3-5天 | 无 |
| T2 | 字段级安全控制 | 中 | 2-3天 | 无 |
| T3 | 数据范围 UI 编辑器 | 中 | 2-3天 | 无 |
| T4 | 审计日志 UI | 低 | 1-2天 | 无 |

---

## T1: 仪表盘引擎 MVP

### 目标
实现拖拽式仪表盘设计器，允许用户创建自定义仪表盘，展示关键指标和图表。

### 任务清单
- [ ] **后端 API**:
  - [ ] `Dashboard` 实体模型与 CRUD
  - [ ] `DashboardWidget` 定义（图表、KPI 卡片、列表）
  - [ ] 数据聚合 API (基于 DataSet)
- [ ] **前端组件**:
  - [ ] `DashboardDesigner`：拖拽式布局设计器
  - [ ] `DashboardRuntime`：运行时渲染组件
  - [ ] 图表组件集成 (使用 Ant Design Charts 或 Blazor-ApexCharts)
- [ ] **集成**:
  - [ ] 首页默认为仪表盘
  - [ ] 支持多仪表盘切换

---

## T2: 字段级安全控制

### 目标
实现基于角色的字段级读/写权限控制。

### 任务清单
- [ ] **后端**:
  - [ ] `FieldPermission` 模型 (RoleId, EntityType, FieldName, CanRead, CanWrite)
  - [ ] `FieldPermissionService`
  - [ ] API 响应过滤 (根据权限剔除无权字段)
- [ ] **前端**:
  - [ ] 角色管理页面增加字段权限配置 Tab
  - [ ] 表单运行时根据权限隐藏/禁用字段

---

## T3: 数据范围 UI 编辑器

### 目标
提供可视化界面配置角色的数据访问范围。

### 任务清单
- [ ] **前端**:
  - [ ] `DataScopeEditor` 组件
  - [ ] 集成到角色管理页面
- [ ] **后端**:
  - [ ] 增强 `RoleDataScope` 模型支持自定义规则
  - [ ] 验证数据范围过滤逻辑

---

## 里程碑
- **M1**: 仪表盘 MVP 上线 (v0.7.0-alpha)
- **M2**: 安全特性增强 (v0.7.0-beta)
- **M3**: v0.7.0 正式发布
