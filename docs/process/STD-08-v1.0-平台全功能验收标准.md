# STD-08: v1.0 平台全功能验收标准 (Platform Acceptance Standard)

**生效日期**: 2026-01-13
**状态**: 执行中

---

## 1. 概述
本文档定义了 BobCRM v1.0 版本的核心平台能力验收标准。任何版本的发布必须 100% 满足以下矩阵中的测试项，严禁以“部分通过”替代“全功能通过”。

## 2. 功能验收矩阵 (Acceptance Matrix)

### 2.1 实体建模与热发布 (Entity Engine)
| 编号 | 验收项 | 期望结果 |
| :--- | :--- | :--- |
| ENT-01 | 实体定义 CRUD | 支持创建、编辑字段（String/Decimal/Bool/Enum等）、删除字段。 |
| ENT-02 | 实体热发布 (Hot-Publish) | 发布后自动生成物理表，支持 Schema 演化（加减字段）。 |
| ENT-03 | 实体热编译 (Live Compilation) | `/api/setup/admin` 之后，实体集成的 API 端点应即时可用。 |

### 2.2 模板系统 (Template System)
| 编号 | 验收项 | 期望结果 |
| :--- | :--- | :--- |
| TMP-01 | 模板自动生成 | 实体发布后，系统必须自动生成默认的 List/Detail/Edit 模板。 |
| TMP-02 | 模板自定义 (Designer) | 支持在拖拽设计器中修改布局、标签、隐藏/显示字段并保存。 |
| TMP-03 | 模板版本与修改 | 修改模板后，运行态应立即反映最新的 UI 布局。 |
| TMP-04 | 多态视图渲染 | 不同用户/角色访问同一实体，应能渲染不同的模板绑定 (Binding)。 |

### 2.3 权限与安全治理 (Security & Access)
| 编号 | 验收项 | 期望结果 |
| :--- | :--- | :--- |
| SEC-01 | 用户管理 (User) | 支持用户创建、禁用、密码重置。 |
| SEC-02 | 角色管理 (Role) | 支持角色创建及其对应的“功能节点 (Functions)”勾选。 |
| SEC-03 | 用户角色映射 | 用户登录后，其权限应随绑定的角色实时改变。 |
| SEC-04 | 菜单管理 (Menu) | 支持菜单树增删改，且菜单项必须关联具体的 **Template Binding**。 |
| SEC-05 | 权限闭环验证 | 角色 A 无权限的菜单应在 UI 隐藏，且直接访问路由应被拦截。 |

### 2.4 数据与业务 (Business Intelligence)
| 编号 | 验收项 | 期望结果 |
| :--- | :--- | :--- |
| BUS-01 | 动态实体 CRUD | 在模板化 UI 中完成动态实体的增删改查。 |
| BUS-02 | 级联逻辑与转换 | 支持线索转换、级联发布等跨实体的业务流。 |

## 3. 自动化测试通过要求
*   **单元测试**: 覆盖率必须覆盖所有 Service 层的核心逻辑，尤其是 `DynamicEntityService` 和 `TemplateService`。
*   **集成测试 (E2E)**: 必须包含上述矩阵中所有标号（ENT/TMP/SEC/BUS）的端到端覆盖。
*   **环境一致性**: 必须通过 `FIX-06` 定义的“全球清理逻辑”验证，确保无测试间干扰。

## 4. 强制复审项 (Audit Items)
*   **清理合规**: 测试后数据库中严禁存留任何动态生成的物理表或元数据。
*   **错误处理**: 所有原子操作（如发布失败）必须有回滚逻辑，不产生脏元数据。

---
**核准人**: Antigravity (Architect)
