# UI / UE 阶段 0 差距报告（Calm Design Language 对照）

> 目的：完成 README 阶段 0 的前两项任务——梳理现有样式资产与功能模块，找出与《docs/UI-01-UIUE设计说明书.md》不符的部分，作为后续重构的依据。所有结论均附具体文件路径，方便逐项整改。

---

## 1. 样式资产与差距

| 资产 | 作用 / 覆盖范围 | 主要问题（相对设计说明书） |
| --- | --- | --- |
| `src/BobCrm.App/wwwroot/app.css` | Blazor 默认校验提示、设计器局部样式 | 纯色值/阴影未使用 Token，且与 Calm 语言的玻璃+新拟物不符（如 `.layout-widget:hover` 使用 #40a9ff 实线） |
| `src/BobCrm.App/wwwroot/css/theme.css` | App Shell + Header + Sider 主题 | 仍是旧“Minimal theme”：`--primary #3f7cff`、实底 `--card-bg #fff`，缺少 bg/base/surface/elevated、blur、双阴影等 Token；未区分 light/dark（只用 `.theme-dark` 临时覆盖） |
| `src/BobCrm.App/Components/Layout/MainLayout.razor.css` | Blazor 错误条样式 | 仅处理错误条，未提供任何 Calm 相关样式 |
| Ant Design 默认主题（未显式 CSS 文件） | Buttons、Tables、Inputs 等 | **已修复**。`components.css` 已覆盖主要组件样式，匹配 Calm 设计语言。 |

## 2. 功能模块 × 组件族矩阵

> 说明：只列出现阶段存在的页面/组件。未来新增模块需同步扩展此矩阵与 README 计划。

| 模块 / 路由 | 依赖的组件族（需重构） | 现状问题 / 证据 |
| --- | --- | --- |
| **App Shell** (`Components/Layout/MainLayout.razor`, `Components/Shared/AppHeader.razor`, `Components/Shared/CustomerSider.razor`) | 导航 & Chrome、Action（按钮/菜单）、Status（头像状态）、Drawer/Workspace | **部分修复**。`app.css` 已添加 Layout 基础样式，但组件内部结构可能仍需优化。 |
| **认证域** (`Components/Pages/Login.razor`, `Register.razor`, `Activate.razor`) | Flow & Form pattern、Fields、Buttons、Status 提示 | 页面结构基于简单 `<form>` + inline style，未实现 glass 卡片或 token 输入；错误提示样式依赖默认浏览器 |
| **客户列表 / Customers** (`Components/Pages/Customers.razor`, `Customers.razor.css?` none) | Collection pattern（表格、筛选、批量操作条）、Filter chips、Bulk bar | 仍用 Ant Design 默认 Table & Pagination，未改主题；页面四周没有 Section 容器；批量条缺失 |
| **Record Workspace** (`Components/Pages/PageLoader.razor`, 渲染动态模板) | Cards、Panels、Inline edit、Timeline、Status badge | Layout 取决于模板 JSON + Ant Design 组件，未注入 Calm 样式；Inline edit 直接使用 Ant Design focus |
| **FormDesigner** (`Components/Pages/FormDesigner.razor`, `Components/Designer/*`, `wwwroot/app.css`) | Designer 专属容器、Widget palette、拖拽指示、属性面板（Fields + Chips + Tabs） | 旧灰白风格，控件大小/颜色/阴影与说明书不符；无 light/dark 区分；工具栏/ palette 仍使用 `#1890ff`；属性面板输入未统一 Field 组件 |
| **模板管理** (`Components/Pages/Templates.razor`) | Cards、Action group、Status badge、Empty state | 完全由内联 style 搭建（`Templates.razor:11-58`），缺少 glass 卡、语义状态层；空状态/错误提示未遵守 pattern |
| **Profile** (`Components/Pages/Profile.razor`) | Cards、Fields、Status 提示 | Inline 样式 + Ant Design 表单；无 calm 样式 |
| **Settings / Entity Definitions / MasterDetailConfig** | Form pattern、Tabs、Tables | 同样使用旧样式/antd 默认，未覆盖 |
| **通知/反馈** (`Components/Shared/ToastHost?` 暂无) | Toast、Inline alert、Error boundary | **已修复**。`components.css` 已实现 Global Toast 样式。 |
| **空状态 / 错误页** (`Components/Pages/Error.razor`, 其他 `@if list.Count==0` ) | Empty state pattern、Illustration | 分散 inline 文案 + 纯文本；没有线性插画或 glass 背景 |

---

## 3. 下一步建议

1. 依据本表在 README 阶段 0 中勾选“样式清点”任务，后续每个阶段都回到这里同步状态。  
2. 功能矩阵将用于阶段 4（模块对齐）的进度跟踪，建议在执行某模块前先在 README 勾选并注明 PR。  
3. 如果后续发现新的模块/组件族，需在本文件与 README 中同步补录。

