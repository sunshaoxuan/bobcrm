2025-10-31 10:19:34.001 +09:00 [INF] ============================================
2025-10-31 10:19:34.019 +09:00 [INF] Application starting at "2025-10-31T10:19:34.0168023+09:00", log file: C:\workspace\bobcrm\src\BobCrm.Api\..\..\logs\api_20251031_101933.log
2025-10-31 10:19:34.024 +09:00 [INF] ============================================
2025-10-31 10:19:35.211 +09:00 [INF] Executed DbCommand (54ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM pg_class AS cls
JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
WHERE
        cls.relkind IN ('r', 'v', 'm', 'f', 'p') AND
        ns.nspname NOT IN ('pg_catalog', 'information_schema') AND
        -- Exclude tables which are members of PG extensions
        NOT EXISTS (
            SELECT 1 FROM pg_depend WHERE
                classid=(
                    SELECT cls.oid
                    FROM pg_class AS cls
                             JOIN pg_namespace AS ns ON ns.oid = cls.relnamespace
                    WHERE relname='pg_class' AND ns.nspname='pg_catalog'
                ) AND
                objid=cls.oid AND
                deptype IN ('e', 'x')
        )
2025-10-31 10:19:35.333 +09:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Customers" AS c
2025-10-31 10:19:35.353 +09:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE IF NOT EXISTS "LocalizationLanguages" ("Id" SERIAL PRIMARY KEY, "Code" text NOT NULL, "NativeName" text NOT NULL);
2025-10-31 10:19:35.367 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Customers" AS c)
2025-10-31 10:19:35.373 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "FieldDefinitions" AS f)
2025-10-31 10:19:35.377 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationLanguages" AS l)
2025-10-31 10:19:35.383 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l)
2025-10-31 10:19:35.424 +09:00 [INF] Executed DbCommand (7ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.429 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.431 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.432 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.434 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.436 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.437 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.438 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.439 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.440 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.441 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.443 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.444 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.445 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.446 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.447 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.449 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.450 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.451 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.452 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.453 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.454 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.455 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.456 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.457 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.458 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.460 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.462 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.464 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.466 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.468 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.469 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.470 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.471 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.472 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.473 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.474 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.476 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.477 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.478 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.480 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.481 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.483 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.484 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.485 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.486 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.487 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.489 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.491 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.492 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.494 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.496 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.497 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.498 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.500 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.501 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.502 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.503 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.504 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.505 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.507 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.508 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.510 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.512 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.513 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.514 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.515 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.517 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.518 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__key_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "LocalizationResources" AS l
    WHERE l."Key" = @__key_0)
2025-10-31 10:19:35.532 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX IF NOT EXISTS idx_fieldvalues_value_gin ON "FieldValues" USING GIN ("Value");
2025-10-31 10:19:35.534 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX IF NOT EXISTS idx_fielddefinitions_tags_gin ON "FieldDefinitions" USING GIN ("Tags");
2025-10-31 10:19:35.535 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX IF NOT EXISTS idx_fielddefinitions_actions_gin ON "FieldDefinitions" USING GIN ("Actions");
2025-10-31 10:19:35.537 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX IF NOT EXISTS idx_userlayouts_layoutjson_gin ON "UserLayouts" USING GIN ("LayoutJson");
2025-10-31 10:19:35.538 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX IF NOT EXISTS idx_fieldvalues_customer_field ON "FieldValues" ("CustomerId", "FieldDefinitionId");
2025-10-31 10:19:35.539 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Customers" AS c
2025-10-31 10:19:35.540 +09:00 [INF] [TestData] Current customer count: 2
2025-10-31 10:19:35.542 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Customers" AS c)
2025-10-31 10:19:35.543 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM "Customers" AS c
2025-10-31 10:19:35.543 +09:00 [INF] [TestData] After seeding, customer count: 2
2025-10-31 10:19:35.592 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__normalizedName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedName_0
LIMIT 1
2025-10-31 10:19:35.618 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedUserName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."AccessFailedCount", a."ConcurrencyStamp", a."Email", a."EmailConfirmed", a."LockoutEnabled", a."LockoutEnd", a."NormalizedEmail", a."NormalizedUserName", a."PasswordHash", a."PhoneNumber", a."PhoneNumberConfirmed", a."SecurityStamp", a."TwoFactorEnabled", a."UserName"
FROM "AspNetUsers" AS a
WHERE a."NormalizedUserName" = @__normalizedUserName_0
LIMIT 1
2025-10-31 10:19:35.644 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__normalizedRoleName_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."Id", a."ConcurrencyStamp", a."Name", a."NormalizedName"
FROM "AspNetRoles" AS a
WHERE a."NormalizedName" = @__normalizedRoleName_0
LIMIT 2
2025-10-31 10:19:35.657 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?', @__p_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT a."UserId", a."RoleId"
FROM "AspNetUserRoles" AS a
WHERE a."UserId" = @__p_0 AND a."RoleId" = @__p_1
LIMIT 1
2025-10-31 10:19:35.681 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id"
FROM "Customers" AS c
2025-10-31 10:19:35.688 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__cid_0='?' (DbType = Int32), @__8__locals1_admin_Id_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CustomerAccesses" AS c
    WHERE c."CustomerId" = @__cid_0 AND c."UserId" = @__8__locals1_admin_Id_1)
2025-10-31 10:19:35.690 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__cid_0='?' (DbType = Int32), @__8__locals1_admin_Id_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CustomerAccesses" AS c
    WHERE c."CustomerId" = @__cid_0 AND c."UserId" = @__8__locals1_admin_Id_1)
2025-10-31 10:19:35.761 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT d."Id", d."FriendlyName", d."Xml"
FROM "DataProtectionKeys" AS d
2025-10-31 10:19:35.987 +09:00 [INF] Now listening on: http://0.0.0.0:5200
2025-10-31 10:19:35.988 +09:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-31 10:19:35.988 +09:00 [INF] Hosting environment: Development
2025-10-31 10:19:35.988 +09:00 [INF] Content root path: C:\workspace\bobcrm\src\BobCrm.Api
2025-10-31 10:20:31.010 +09:00 [INF] Request starting HTTP/1.1 GET http://192.168.20.218:5200/api/i18n/ja - null null
2025-10-31 10:20:31.010 +09:00 [INF] Request starting HTTP/1.1 GET http://192.168.20.218:5200/api/i18n/ja - null null
2025-10-31 10:20:31.010 +09:00 [INF] Request starting HTTP/1.1 GET http://192.168.20.218:5200/api/user/preferences - null null
2025-10-31 10:20:31.152 +09:00 [INF] Executing endpoint 'HTTP: GET /api/i18n/{lang}'
2025-10-31 10:20:31.152 +09:00 [INF] Executing endpoint 'HTTP: GET /api/i18n/{lang}'
2025-10-31 10:20:31.211 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT l."Key", l."EN", l."JA", l."ZH"
FROM "LocalizationResources" AS l
2025-10-31 10:20:31.219 +09:00 [INF] Writing value of type 'Dictionary`2' as Json.
2025-10-31 10:20:31.225 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT l."Key", l."EN", l."JA", l."ZH"
FROM "LocalizationResources" AS l
2025-10-31 10:20:31.226 +09:00 [INF] Writing value of type 'Dictionary`2' as Json.
2025-10-31 10:20:31.232 +09:00 [INF] Executed endpoint 'HTTP: GET /api/i18n/{lang}'
2025-10-31 10:20:31.232 +09:00 [INF] Executed endpoint 'HTTP: GET /api/i18n/{lang}'
2025-10-31 10:20:31.236 +09:00 [INF] Request finished HTTP/1.1 GET http://192.168.20.218:5200/api/i18n/ja - 200 null application/json; charset=utf-8 226.6846ms
2025-10-31 10:20:31.236 +09:00 [INF] Request finished HTTP/1.1 GET http://192.168.20.218:5200/api/i18n/ja - 200 null application/json; charset=utf-8 226.7073ms
2025-10-31 10:20:31.258 +09:00 [INF] Request starting HTTP/1.1 GET http://192.168.20.218:5200/api/customers - null null
2025-10-31 10:20:31.411 +09:00 [INF] Executing endpoint 'HTTP: GET /api/user/preferences'
2025-10-31 10:20:31.421 +09:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@__uid_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Language", u."PrimaryColor", u."Theme", u."UpdatedAt", u."UserId"
FROM "UserPreferences" AS u
WHERE u."UserId" = @__uid_0
LIMIT 1
2025-10-31 10:20:31.454 +09:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AppDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "UserPreferences" does not exist

POSITION: 91
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "UserPreferences" does not exist
    Position: 91
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "UserPreferences" does not exist

POSITION: 91
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "UserPreferences" does not exist
    Position: 91
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-31 10:20:31.465 +09:00 [INF] Executing endpoint 'HTTP: GET /api/customers'
2025-10-31 10:20:31.468 +09:00 [INF] Executed endpoint 'HTTP: GET /api/user/preferences'
2025-10-31 10:20:31.472 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__uid_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."CustomerId"
FROM "CustomerAccesses" AS c
WHERE c."UserId" = @__uid_0
2025-10-31 10:20:31.472 +09:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42P01: relation "UserPreferences" does not exist

POSITION: 91
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_12>d.MoveNext() in C:\workspace\bobcrm\src\BobCrm.Api\Program.cs:line 296
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "UserPreferences" does not exist
    Position: 91
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-31 10:20:31.500 +09:00 [INF] Request finished HTTP/1.1 GET http://192.168.20.218:5200/api/user/preferences - 500 null text/plain; charset=utf-8 491.0479ms
2025-10-31 10:20:31.517 +09:00 [INF] Executed DbCommand (32ms) [Parameters=[@__accessIds_0='?' (DbType = Object)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Code", c."CreatedAt", c."CreatedBy", c."ExtData", c."Name", c."UpdatedAt", c."UpdatedBy", c."Version"
FROM "Customers" AS c
WHERE c."Id" = ANY (@__accessIds_0)
2025-10-31 10:20:31.526 +09:00 [INF] Request starting HTTP/1.1 PUT http://192.168.20.218:5200/api/user/preferences - application/json; charset=utf-8 null
2025-10-31 10:20:31.528 +09:00 [INF] Executing endpoint 'HTTP: PUT /api/user/preferences'
2025-10-31 10:20:31.544 +09:00 [INF] Executed DbCommand (3ms) [Parameters=[@__lang_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."CustomerId", c."Language", c."Name"
FROM "CustomerLocalizations" AS c
WHERE c."Language" = @__lang_0
2025-10-31 10:20:31.545 +09:00 [ERR] Failed executing DbCommand (1ms) [Parameters=[@__uid_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Language", u."PrimaryColor", u."Theme", u."UpdatedAt", u."UserId"
FROM "UserPreferences" AS u
WHERE u."UserId" = @__uid_0
LIMIT 1
2025-10-31 10:20:31.545 +09:00 [INF] Writing value of type 'List`1' as Json.
2025-10-31 10:20:31.546 +09:00 [ERR] An exception occurred while iterating over the results of a query for context type 'AppDbContext'.
Npgsql.PostgresException (0x80004005): 42P01: relation "UserPreferences" does not exist

POSITION: 91
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "UserPreferences" does not exist
    Position: 91
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
Npgsql.PostgresException (0x80004005): 42P01: relation "UserPreferences" does not exist

POSITION: 91
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "UserPreferences" does not exist
    Position: 91
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-31 10:20:31.551 +09:00 [INF] Executed endpoint 'HTTP: PUT /api/user/preferences'
2025-10-31 10:20:31.553 +09:00 [INF] Executed endpoint 'HTTP: GET /api/customers'
2025-10-31 10:20:31.553 +09:00 [INF] Request finished HTTP/1.1 GET http://192.168.20.218:5200/api/customers - 200 null application/json; charset=utf-8 294.974ms
2025-10-31 10:20:31.551 +09:00 [ERR] An unhandled exception has occurred while executing the request.
Npgsql.PostgresException (0x80004005): 42P01: relation "UserPreferences" does not exist

POSITION: 91
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.ShapedQueryCompilingExpressionVisitor.SingleOrDefaultAsync[TSource](IAsyncEnumerable`1 asyncEnumerable, CancellationToken cancellationToken)
   at Program.<>c.<<<Main>$>b__0_13>d.MoveNext() in C:\workspace\bobcrm\src\BobCrm.Api\Program.cs:line 316
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)
   at Microsoft.AspNetCore.Http.RequestDelegateFactory.<>c__DisplayClass102_2.<<HandleRequestBodyAndCompileRequestDelegateForJson>b__2>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
  Exception data:
    Severity: ERROR
    SqlState: 42P01
    MessageText: relation "UserPreferences" does not exist
    Position: 91
    File: parse_relation.c
    Line: 1449
    Routine: parserOpenTable
2025-10-31 10:20:31.558 +09:00 [INF] Request finished HTTP/1.1 PUT http://192.168.20.218:5200/api/user/preferences - 500 null text/plain; charset=utf-8 31.5726ms
2025-10-31 10:20:35.526 +09:00 [INF] Request starting HTTP/1.1 GET http://192.168.20.218:5200/api/i18n/ja - null null
2025-10-31 10:20:35.527 +09:00 [INF] Executing endpoint 'HTTP: GET /api/i18n/{lang}'
2025-10-31 10:20:35.531 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT l."Key", l."EN", l."JA", l."ZH"
FROM "LocalizationResources" AS l
2025-10-31 10:20:35.531 +09:00 [INF] Writing value of type 'Dictionary`2' as Json.
2025-10-31 10:20:35.532 +09:00 [INF] Executed endpoint 'HTTP: GET /api/i18n/{lang}'
2025-10-31 10:20:35.532 +09:00 [INF] Request finished HTTP/1.1 GET http://192.168.20.218:5200/api/i18n/ja - 200 null application/json; charset=utf-8 6.0083ms
2025-10-31 10:20:35.539 +09:00 [INF] Request starting HTTP/1.1 GET http://192.168.20.218:5200/api/customers/1 - null null
2025-10-31 10:20:35.540 +09:00 [INF] Executing endpoint 'HTTP: GET /api/customers/{id:int}'
2025-10-31 10:20:35.546 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CustomerAccesses" AS c
    WHERE c."CustomerId" = @__id_0)
2025-10-31 10:20:35.551 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32), @__uid_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "CustomerAccesses" AS c
    WHERE c."CustomerId" = @__id_0 AND c."UserId" = @__uid_1)
2025-10-31 10:20:35.556 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."Code", c."CreatedAt", c."CreatedBy", c."ExtData", c."Name", c."UpdatedAt", c."UpdatedBy", c."Version"
FROM "Customers" AS c
WHERE c."Id" = @__id_0
LIMIT 1
2025-10-31 10:20:35.562 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."Actions", f."CreatedAt", f."CreatedBy", f."DataType", f."DefaultValue", f."DisplayName", f."Key", f."Required", f."Tags", f."UpdatedAt", f."UpdatedBy", f."Validation"
FROM "FieldDefinitions" AS f
2025-10-31 10:20:35.583 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT f."Id", f."CreatedAt", f."CreatedBy", f."CustomerId", f."FieldDefinitionId", f."UpdatedAt", f."UpdatedBy", f."Value", f."Version"
FROM "FieldValues" AS f
WHERE f."CustomerId" = @__id_0
ORDER BY f."Version" DESC
2025-10-31 10:20:35.595 +09:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32), @__lang_1='?'], CommandType='"Text"', CommandTimeout='30']
SELECT c."CustomerId", c."Language", c."Name"
FROM "CustomerLocalizations" AS c
WHERE c."CustomerId" = @__id_0 AND c."Language" = @__lang_1
LIMIT 1
2025-10-31 10:20:35.598 +09:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT l."Key", l."EN", l."JA", l."ZH"
FROM "LocalizationResources" AS l
2025-10-31 10:20:35.600 +09:00 [INF] Writing value of type '<>f__AnonymousType2`5' as Json.
2025-10-31 10:20:35.604 +09:00 [INF] Executed endpoint 'HTTP: GET /api/customers/{id:int}'
2025-10-31 10:20:35.605 +09:00 [INF] Request finished HTTP/1.1 GET http://192.168.20.218:5200/api/customers/1 - 200 null application/json; charset=utf-8 65.7874ms
2025-10-31 10:27:10.411 +09:00 [INF] Application is shutting down...
