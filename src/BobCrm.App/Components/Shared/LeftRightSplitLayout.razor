@using BobCrm.App.Components.Shared
@inject BobCrm.App.Services.I18nService I18n

@*
    LeftRightSplitLayout - left list, right detail layout
    
    Left: compact list (key fields like Code, Name)
    Right: full detail form
    Scenario: medium volume; need fast browse and edit
*@

<div class="left-right-split-layout">
    <aside class="split-list">
        <ListTemplateHost EntityType="@EntityType" />
    </aside>

    <section class="split-detail">
        @if (!string.IsNullOrEmpty(_selectedRecordId))
        {
            <div class="detail-placeholder">
                <p>@I18n.T("LBL_SELECTED_RECORD"): @_selectedRecordId</p>
                <p>@I18n.T("TXT_DETAIL_PLACEHOLDER")</p>
            </div>
        }
        else
        {
            <div class="empty-state">
                <p>@I18n.T("TXT_SELECT_PROMPT_LEFT")</p>
            </div>
        }
    </section>
</div>

<style>
.left-right-split-layout {
    display: flex;
    height: 100%;
    gap: var(--spacing-md);
}

.split-list {
    width: 300px;
    flex-shrink: 0;
    overflow-y: auto;
}

.split-detail {
    flex: 1;
    overflow-y: auto;
}

.empty-state, .detail-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-secondary);
}
</style>

@code {
    [Parameter, EditorRequired]
    public string EntityType { get; set; } = string.Empty;

    [Parameter]
    public string? ListTemplate { get; set; }

    [Parameter]
    public string? DetailTemplate { get; set; }

    [Parameter]
    public string? EditTemplate { get; set; }

    [Parameter]
    public EventCallback<string> OnRecordSelected { get; set; }

    [Parameter]
    public EventCallback OnRecordSaved { get; set; }

    [Parameter]
    public EventCallback<string> OnRecordDeleted { get; set; }

#pragma warning disable CS0649
    private string? _selectedRecordId;
#pragma warning restore CS0649
}
