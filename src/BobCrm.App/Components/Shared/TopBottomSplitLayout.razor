@using BobCrm.App.Components.Shared
@inject BobCrm.App.Services.I18nService I18n

@*
    TopBottomSplitLayout - top list, bottom detail layout
    
    Top: full list table (configured display fields)
    Bottom: detail form (inline for selected row)
    Scenario: larger datasets needing full list context
*@

<div class="top-bottom-split-layout">
    <div class="split-list">
        <ListTemplateHost EntityType="@EntityType" />
    </div>

    <div class="split-detail">
        @if (!string.IsNullOrEmpty(_selectedRecordId))
        {
            <div class="detail-placeholder">
                <p>@I18n.T("LBL_SELECTED_RECORD"): @_selectedRecordId</p>
                <p>@I18n.T("TXT_DETAIL_PLACEHOLDER")</p>
            </div>
        }
        else
        {
            <div class="empty-state">
                <p>@I18n.T("TXT_SELECT_PROMPT_TOP")</p>
            </div>
        }
    </div>
</div>

<style>
.top-bottom-split-layout {
    display: flex;
    flex-direction: column;
    height: 100%;
    gap: var(--spacing-md);
}

.split-list {
    flex: 1;
    min-height: 300px;
    overflow-y: auto;
}

.split-detail {
    flex: 1;
    min-height: 200px;
    overflow-y: auto;
}

.empty-state, .detail-placeholder {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: var(--text-secondary);
}
</style>

@code {
    [Parameter, EditorRequired]
    public string EntityType { get; set; } = string.Empty;

    [Parameter]
    public string? ListTemplate { get; set; }

    [Parameter]
    public string? DetailTemplate { get; set; }

    [Parameter]
    public string? EditTemplate { get; set; }

    [Parameter]
    public EventCallback<string> OnRecordSelected { get; set; }

    [Parameter]
    public EventCallback OnRecordSaved { get; set; }

    [Parameter]
    public EventCallback<string> OnRecordDeleted { get; set; }

#pragma warning disable CS0649
    private string? _selectedRecordId;
#pragma warning restore CS0649
}
