@using BobCrm.App.Models.Widgets
@inject BobCrm.App.Services.I18nService I18n

<Divider Plain>分组属性</Divider>

<div style="margin-bottom:16px">
    <label style="display:block; font-size:12px; color:#666; margin-bottom:4px">标题</label>
    <Input @bind-Value="Widget.Title" Placeholder="分组标题" OnChange="@((string _) => HandleChange())" />
</div>

<div style="margin-bottom:16px; display:flex; justify-content:space-between; align-items:center">
    <label style="font-size:12px; color:#666">显示标题</label>
    <Switch @bind-Value="Widget.ShowTitle" OnChange="@((_) => HandleChange())" />
</div>

<div style="margin-bottom:16px; display:flex; justify-content:space-between; align-items:center">
    <label style="font-size:12px; color:#666">可折叠</label>
    <Switch @bind-Value="Widget.Collapsible" OnChange="@((_) => HandleChange())" />
</div>

@if (Widget.Collapsible)
{
    <div style="margin-bottom:16px; display:flex; justify-content:space-between; align-items:center">
        <label style="font-size:12px; color:#666">默认折叠</label>
        <Switch @bind-Value="Widget.Collapsed" OnChange="@((_) => HandleChange())" />
    </div>
}

<Divider Plain Style="margin:12px 0 8px 0; font-size:11px">布局设置</Divider>

<div style="margin-bottom:16px">
    <label style="display:block; font-size:12px; color:#666; margin-bottom:4px">间距 (px)</label>
    <AntDesign.InputNumber TValue="int" @bind-Value="Widget.ContainerLayout.Gap" Min="0" Max="48" Style="width:100%" OnChange="@((_) => HandleChange())" />
</div>

<div style="margin-bottom:16px">
    <label style="display:block; font-size:12px; color:#666; margin-bottom:4px">内边距 (px)</label>
    <AntDesign.InputNumber TValue="int" @bind-Value="Widget.ContainerLayout.Padding" Min="0" Max="48" Style="width:100%" OnChange="@((_) => HandleChange())" />
</div>

<div style="margin-bottom:16px">
    <label style="display:block; font-size:12px; color:#666; margin-bottom:4px">背景色</label>
    <Input @bind-Value="Widget.ContainerLayout.BackgroundColor" Placeholder="#f5f5f5" OnChange="@((string _) => HandleChange())" />
</div>

<div style="margin-bottom:16px">
    <label style="display:block; font-size:12px; color:#666; margin-bottom:4px">圆角 (px)</label>
    <AntDesign.InputNumber TValue="int" @bind-Value="Widget.ContainerLayout.BorderRadius" Min="0" Max="24" Style="width:100%" OnChange="@((_) => HandleChange())" />
</div>

@code {
    [Parameter, EditorRequired]
    public SectionWidget Widget { get; set; } = default!;

    [Parameter]
    public Action? OnPropertyChanged { get; set; }

    private void HandleChange()
    {
        OnPropertyChanged?.Invoke();
    }
}

