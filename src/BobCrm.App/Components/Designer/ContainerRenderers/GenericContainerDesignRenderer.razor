@using BobCrm.App.Models.Widgets

@* 通用容器的设计态渲染器（用于未知容器类型） *@
<div class="frame-drop-zone" data-container-id="@Container.Id"
     style="border:1px dashed #ccc; padding:@(Container.Children?.Any() == true ? 12 : 0)px; background:#fafafa; min-height:@(Container.GetDesignMinHeight())px; display:flex; flex-direction:column; pointer-events:auto;"
     @ondrop="@OnDrop" @ondrop:preventDefault @ondrop:stopPropagation
     @ondragover="@OnDragOver" @ondragover:preventDefault>
    @if (Container.Children?.Any() == true)
    {
        <div style="font-size:11px; color:#999; margin-bottom:8px; flex-shrink:0;">
            容器: @Container.Type
        </div>
        <div style="flex:1; display:flex; flex-direction:column; gap:8px;">
            @foreach (var child in Container.Children)
            {
                @RenderChild(child)
            }
        </div>
    }
    else
    {
        <div style="flex:1; display:flex; align-items:center; justify-content:center; color:#999; font-size:12px; pointer-events:none">
            拖入组件到此容器
        </div>
    }
</div>

@code {
    [Parameter, EditorRequired]
    public ContainerWidget Container { get; set; } = null!;

    [Parameter, EditorRequired]
    public RenderFragment<DraggableWidget> RenderChild { get; set; } = null!;

    [Parameter, EditorRequired]
    public EventCallback<Microsoft.AspNetCore.Components.Web.DragEventArgs> OnDrop { get; set; }

    [Parameter, EditorRequired]
    public EventCallback<Microsoft.AspNetCore.Components.Web.DragEventArgs> OnDragOver { get; set; }
}


